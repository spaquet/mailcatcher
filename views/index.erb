<!DOCTYPE html>
<html class="mailcatcher">
  <head>
    <title>MailCatcher NG</title>
    <base href="<%= settings.prefix.chomp("/") %>/">
    <link href="favicon.ico" rel="icon">
    <!-- jQuery -->
    <script src="<%= asset_path('jquery.min.js') %>"></script>
    <!-- Tippy.js v6 and Popper.js for email signature tooltips -->
    <script src="<%= asset_path('popper.min.js') %>"></script>
    <script src="<%= asset_path('tippy.min.js') %>"></script>
    <link rel="stylesheet" href="<%= asset_path('tippy-light.min.css') %>">
    <!-- Highlight.js for syntax highlighting email source code -->
    <script src="<%= asset_path('highlight.min.js') %>"></script>
    <link rel="stylesheet" href="<%= asset_path('atom-one-light.min.css') %>">
    <!-- Favcount for favicon notification -->
    <script src="<%= asset_path('favcount.js') %>"></script>
    <!-- MailCatcher main application -->
    <script src="<%= asset_path('mailcatcher.js') %>"></script>
    <!-- MailCatcher NG UI Stylesheet -->
    <link rel="stylesheet" href="<%= asset_path('mailcatcher.css') %>">
  </head>
  <body>
    <noscript>
      <div id="noscript-overlay">
        <div id="noscript">
          MailCatcher NG requires JavaScript to be enabled.
        </div>
      </div>
    </noscript>
    <header>
      <div>
        <h1><a href="https://github.com/spaquet/mailcatcher" target="_blank">MailCatcher NG</a></h1>
        <div class="version-badge">
          <%= @version %>
          <a href="#" class="version-notification" id="versionNotification" style="display: none;">
            <svg class="version-notification-icon" data-slot="icon" fill="none" stroke-width="1.5" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" style="display: none;">
              <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5"></path>
            </svg>
            <span id="versionNotificationText">Update available</span>
          </a>
        </div>
      </div>
      <div class="header-controls">
        <div class="search-box">
          <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
          <input type="search" name="search" placeholder="Search messages..." incremental="true" />
          <button type="button" class="search-clear" id="searchClear" title="Clear search">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>
        <div class="attachment-filter">
          <select id="attachmentFilter" title="Filter by attachments">
            <option value="all">All</option>
            <option value="with">With attachments</option>
            <option value="without">Without attachments</option>
          </select>
        </div>
        <div class="header-info">
          <div class="status-badge" id="websocketStatus">
            <div class="indicator"></div>
            <span id="statusText">Connected</span>
          </div>
          <div class="email-count" id="emailCount">0 emails</div>
          <div class="action-buttons">
            <button class="btn" id="serverInfoBtn" title="View server information">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                <line x1="2" y1="17" x2="22" y2="17"></line>
                <polyline points="15 21 12 17 9 21"></polyline>
              </svg>
              Server
            </button>
            <button class="btn" id="clearBtn" title="Clear all messages">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                <line x1="10" y1="11" x2="10" y2="17"></line>
                <line x1="14" y1="11" x2="14" y2="17"></line>
              </svg>
              Clear
            </button>
            <% if MailCatcher.quittable? %>
              <button class="btn" id="quitBtn" title="Quit MailCatcher">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="23 6 13.46 15.89"></polyline>
                  <polyline points="23 6 6.21 23"></polyline>
                  <polyline points="1 1 21 21"></polyline>
                </svg>
                Quit
              </button>
            <% end %>
          </div>
        </div>
      </div>
    </header>
    <main>
      <nav id="messages">
        <table>
          <thead>
            <tr>
              <th class="col-attachments"></th>
              <th class="col-bimi"></th>
              <th class="sortable" data-sort-field="from">
                <span>From</span>
                <svg class="sort-icon sort-icon-down" fill="none" stroke-width="1.5" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5"></path>
                </svg>
                <svg class="sort-icon sort-icon-up" style="display: none;" fill="none" stroke-width="1.5" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 15.75 7.5-7.5 7.5 7.5"></path>
                </svg>
              </th>
              <th class="sortable" data-sort-field="to">
                <span>To</span>
                <svg class="sort-icon sort-icon-down" fill="none" stroke-width="1.5" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5"></path>
                </svg>
                <svg class="sort-icon sort-icon-up" style="display: none;" fill="none" stroke-width="1.5" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 15.75 7.5-7.5 7.5 7.5"></path>
                </svg>
              </th>
              <th class="sortable" data-sort-field="subject">
                <span>Subject</span>
                <svg class="sort-icon sort-icon-down" fill="none" stroke-width="1.5" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5"></path>
                </svg>
                <svg class="sort-icon sort-icon-up" style="display: none;" fill="none" stroke-width="1.5" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 15.75 7.5-7.5 7.5 7.5"></path>
                </svg>
              </th>
              <th class="sortable" data-sort-field="received">
                <span>Received</span>
                <svg class="sort-icon sort-icon-down" fill="none" stroke-width="1.5" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5"></path>
                </svg>
                <svg class="sort-icon sort-icon-up" style="display: none;" fill="none" stroke-width="1.5" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 15.75 7.5-7.5 7.5 7.5"></path>
                </svg>
              </th>
              <th>Size</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </nav>
      <div id="resizer"></div>
      <article id="message">
        <header>
          <div class="views-container">
            <nav class="views">
              <ul class="views-tabs">
                <li class="format tab html selected" data-message-format="html"><a href="#">HTML</a></li>
                <li class="format tab plain" data-message-format="plain"><a href="#">Plain Text</a></li>
                <li class="format tab transcript" data-message-format="transcript"><a href="#">Transcript</a></li>
                <li class="format tab source" data-message-format="source">
                  <a href="#">Source</a>
                  <button class="copy-source-btn" id="copySourceBtn" title="Copy email source to clipboard">
                    <svg class="copy-icon" data-slot="icon" fill="none" stroke-width="1.5" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path>
                    </svg>
                    <svg class="checkmark-icon" style="display: none;" data-slot="icon" fill="none" stroke-width="1.5" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M11.35 3.836c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m8.9-4.414c.376.023.75.05 1.124.08 1.131.094 1.976 1.057 1.976 2.192V16.5A2.25 2.25 0 0 1 18 18.75h-2.25m-7.5-10.5H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V18.75m-7.5-10.5h6.375c.621 0 1.125.504 1.125 1.125v9.375m-8.25-3 1.5 1.5 3-3.75"></path>
                    </svg>
                  </button>
                </li>
              </ul>
              <ul class="views-actions">
                <li><button class="signature-info-btn" id="encryptionInfoBtn" title="Email encryption and signature information">
                  <svg data-slot="icon" fill="none" stroke-width="1.5" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"></path>
                  </svg>
                </button></li>
                <li><button class="signature-info-btn" id="signatureInfoBtn" title="Email signature verification (DMARC, DKIM, SPF)">
                  <svg data-slot="icon" fill="none" stroke-width="1.5" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"></path>
                  </svg>
                </button></li>
                <li><a href="#" class="download-btn" data-message-format="html">
                  <svg class="download-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                    <polyline points="7 10 12 15 17 10"></polyline>
                    <line x1="12" y1="15" x2="12" y2="3"></line>
                  </svg>
                  Download
                </a></li>
              </ul>
            </nav>
            <div class="accessibility-ratings">
              <div class="accessibility-score">
                <div class="score-label">Accessibility</div>
                <button class="accessibility-score-btn" id="accessibilityScoreBtn" title="Click for accessibility details">
                  <div class="score-value" id="accessibilityScore">-</div>
                </button>
                <div class="score-unit">/ 100</div>
              </div>
              <div class="accessibility-breakdown">
                <div class="breakdown-item">
                  <span class="breakdown-label">Images with Alt Text</span>
                  <button class="accessibility-metric-btn" id="imagesWithAltBtn" title="Click for image accessibility details">
                    <span class="breakdown-value" id="imagesWithAlt">-</span>
                  </button>
                </div>
                <div class="breakdown-item">
                  <span class="breakdown-label">Semantic HTML</span>
                  <button class="accessibility-metric-btn" id="semanticHtmlBtn" title="Click for semantic HTML details">
                    <span class="breakdown-value" id="semanticHtml">-</span>
                  </button>
                </div>
                <div class="breakdown-item">
                  <span class="breakdown-label">Link Text</span>
                  <button class="accessibility-metric-btn" id="linksWithTextBtn" title="Click for link accessibility details">
                    <span class="breakdown-value" id="linksWithText">-</span>
                  </button>
                </div>
              </div>
            </div>
          </div>
          <div class="metadata">
            <div class="metadata-column">
              <div class="metadata-item">
                <dt class="created_at">Received</dt>
                <dd class="created_at"></dd>
              </div>
              <div class="metadata-item">
                <dt class="from">From</dt>
                <dd class="from"></dd>
              </div>
              <div class="metadata-item">
                <dt class="to">To</dt>
                <dd class="to"></dd>
              </div>
              <div class="metadata-item">
                <dt class="subject">Subject</dt>
                <dd class="subject"></dd>
              </div>
            </div>
          </div>
          <div class="attachments-column">
            <div class="attachments-header">Attachments</div>
            <ul class="attachments-list"></ul>
          </div>
        </header>
        <iframe class="body"></iframe>
      </article>
    </main>
    <!-- MailCatcher NG UI JavaScript -->
    <script src="<%= asset_path('mailcatcher-ui.js') %>"></script>
  </body>
</html>
